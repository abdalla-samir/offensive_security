#!/bin/bash

file=$1


if [ -f "$file" ]
then

shrewdeye_tool() {
echo "################################################### [+]Starting Shrewdeye ##############################################################"
while read -r wildcard
do
curl https://shrewdeye.app/domains/$wildcard.txt >> shrewdeye.txt
done < "$file"
echo "################################################### [+]Shrewdeye Completed #############################################################"
}


subfinder_tool() {
echo "################################################### [+]Starting Subfinder  #############################################################"
while read -r wildcard
do
subfinder -d $wildcard -all -recursive >> subfinder.txt
done < "$file"
echo "################################################### [+]Subfinder Completed #############################################################"
}

assetfinder_tool() {
echo "################################################### [+]Starting Assetfinder ###########################################################"
while read -r wildcard
do
assetfinder -subs-only  "$wildcard" >> assetfinder.txt
done < "$file"
echo "################################################### [+]Assetfinder Completed ##########################################################"
}

findomain_tool() {
echo "################################################### [+] Starting Findomain #############################################################"
while read -r wildcard
do
findomain -t "$wildcard" -u findomain_one.txt
cat findomain.txt >> findomain_two.txt
done < "$file"
echo "################################################### [+] Findomain Completed  ###########################################################"
}

echo "#######################################################################################################################################"
echo "#######################################################################################################################################"
shrewdeye_tool&
echo "#######################################################################################################################################"
echo "#######################################################################################################################################"
subfinder_tool&
echo "#######################################################################################################################################"
echo "#######################################################################################################################################"
assetfinder_tool&
echo "#######################################################################################################################################"
echo "#######################################################################################################################################"
findomain_tool&
wait

echo "#######################################################################################################################################"
echo "#######################################################################################################################################"

echo "#################################### Removing duplicates and delete unwanted files ####################################################"

cat shrewdeye.txt subfinder.txt assetfinder.txt findomain_two.txt | sort -u | anew subdomains.txt
rm -r shrewdeye.txt subfinder.txt assetfinder.txt findomain_two.txt findomain_one.txt findomain_one.old.txt

echo "#######################################################################################################################################"

else
echo "File Doesnt't Exits"
echo "EX. ./bash.sh <filename>"
fi
